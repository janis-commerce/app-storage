# App Storage

[![npm version](https://badge.fury.io/js/@janis-commerce%2Fapp-storage.svg)](https://www.npmjs.com/package/@janis-commerce/app-storage)

A thin wrapper around [react-native-mmkv](https://github.com/mrousavy/react-native-mmkv) with optional per-key expiration (TTL).

## Features

- ğŸš€ Fast and efficient key-value storage powered by MMKV
- â° Optional TTL (Time To Live) for automatic key expiration
- ğŸ“¦ Automatic JSON serialization for objects and arrays
- ğŸ”’ Type-safe with TypeScript support
- ğŸª¶ Lightweight and easy to use

## Installation

```bash
npm install @janiscommerce/app-storage
```

### Peer Dependencies

This package requires `react-native-mmkv` as a peer dependency:

```bash
npm install react-native-mmkv
```

## Quick Start

```typescript
import Storage from '@janis-commerce/app-storage';

// Create a storage instance
const storage = new Storage({ id: 'my-app-storage' });

// Store values
storage.set('token', 'abc123');
storage.set('user', { name: 'Jane', age: 30 });

// Retrieve values
const token = storage.get<string>('token'); // 'abc123'
const user = storage.get<{ name: string; age: number }>('user'); // { name: 'Jane', age: 30 }

// Remove a key
storage.remove('token');

// Clear all keys
storage.clear();
```

## Usage with TTL (Time To Live)

```typescript
import Storage from '@janis-commerce/app-storage';

const storage = new Storage();

// Store a value that expires in 5 minutes
storage.set('session-token', 'xyz789', { expiresAt: 5 });

// After 5 minutes, this will return null
const token = storage.get('session-token');
```

## Multiple Storage Instances

You can create multiple isolated storage instances for different purposes:

```typescript
import Storage from '@janis-commerce/app-storage';

const userStorage = new Storage({ id: 'user-data' });
const cacheStorage = new Storage({ id: 'cache' });
const sessionStorage = new Storage({ id: 'session' });

userStorage.set('profile', { name: 'John' });
cacheStorage.set('last-fetch', Date.now(), { expiresAt: 10 }); // expires in 10 minutes
sessionStorage.set('temp-data', { foo: 'bar' });
```

## API Documentation

{{>main}}

## Author

Janis Commerce
